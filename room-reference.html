<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Room Reference Guide - ATL ESnet</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --embassy-navy: #003057;
            --embassy-blue: #0057A0;
            --embassy-gold: #C7A961;
            --embassy-light-blue: #E8F1F8;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--embassy-navy) 0%, var(--embassy-blue) 100%);
            min-height: 100vh;
            display: flex;
        }

        /* Hamburger Menu Button (Mobile Only) */
        .hamburger {
            display: none;
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1001;
            background: white;
            border: none;
            padding: 10px;
            border-radius: 8px;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        .hamburger span {
            display: block;
            width: 25px;
            height: 3px;
            background: var(--embassy-navy);
            margin: 5px 0;
            transition: 0.3s;
        }

        .hamburger.active span:nth-child(1) {
            transform: rotate(-45deg) translate(-5px, 6px);
        }

        .hamburger.active span:nth-child(2) {
            opacity: 0;
        }

        .hamburger.active span:nth-child(3) {
            transform: rotate(45deg) translate(-5px, -6px);
        }

        /* Left Sidebar Navigation */
        .sidebar {
            width: 280px;
            background: white;
            min-height: 100vh;
            padding: 30px 0;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .sidebar-header {
            padding: 0 25px 25px;
            border-bottom: 2px solid var(--embassy-light-blue);
            margin-bottom: 20px;
        }

        .sidebar-header h2 {
            color: var(--embassy-navy);
            font-size: 24px;
            margin-bottom: 5px;
        }

        .sidebar-header p {
            color: #666;
            font-size: 13px;
        }

        .nav-section {
            margin-bottom: 25px;
        }

        .nav-section-title {
            padding: 0 25px;
            font-size: 11px;
            font-weight: 600;
            color: #999;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 10px;
        }

        .nav-link {
            display: block;
            padding: 12px 25px;
            color: #333;
            text-decoration: none;
            font-size: 15px;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
        }

        .nav-link:hover {
            background: var(--embassy-light-blue);
            border-left-color: var(--embassy-blue);
            color: var(--embassy-navy);
        }

        .nav-link.active {
            background: var(--embassy-light-blue);
            border-left-color: var(--embassy-blue);
            color: var(--embassy-navy);
            font-weight: 600;
        }

        .nav-link.home {
            color: var(--embassy-blue);
            font-weight: 600;
        }

        .nav-link.home:before {
            content: "üè† ";
        }

        /* Main Content Area */
        .main-content {
            flex: 1;
            padding: 40px;
            overflow-y: auto;
            position: relative;
        }

        /* Date/Time Display Above Header */
        .datetime-display {
            position: absolute;
            top: 10px;
            right: 40px;
            font-size: 16px;
            font-weight: 600;
            color: var(--embassy-gold);
            text-align: right;
            z-index: 10;
        }

        /* Top Header */
        .page-header {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            margin-top: 50px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .page-title-section h1 {
            color: var(--embassy-navy);
            font-size: 36px;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .page-title-section p {
            color: #666;
            font-size: 15px;
        }

        .back-button {
            padding: 12px 24px;
            background: var(--embassy-navy);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            white-space: nowrap;
        }

        .back-button:hover {
            background: var(--embassy-blue);
            transform: translateY(-2px);
        }

        /* Search Section */
        .search-section {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
        }

        .search-section h2 {
            color: var(--embassy-navy);
            font-size: 24px;
            margin-bottom: 15px;
        }

        .search-container {
            position: relative;
            margin-bottom: 15px;
        }

        .search-input {
            width: 100%;
            padding: 15px 20px 15px 50px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--embassy-blue);
        }

        .search-icon {
            position: absolute;
            left: 18px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 20px;
        }

        .search-examples {
            color: #666;
            font-size: 13px;
            font-style: italic;
            margin-top: 8px;
        }

        .connecting-filter {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 15px;
            cursor: pointer;
            user-select: none;
        }

        .connecting-filter input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .connecting-filter .count {
            color: var(--embassy-gold);
            font-weight: 600;
        }

        /* Filter Info Bar */
        .filter-info {
            background: var(--embassy-gold);
            color: var(--embassy-navy);
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: none;
            align-items: center;
            justify-content: space-between;
        }

        .filter-info.show {
            display: flex;
        }

        .clear-filter {
            background: var(--embassy-navy);
            color: white;
            border: none;
            padding: 8px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .clear-filter:hover {
            background: var(--embassy-blue);
        }

        /* Property Overview */
        .property-overview {
            background: linear-gradient(135deg, var(--embassy-navy) 0%, var(--embassy-blue) 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
        }

        .property-overview h2 {
            color: var(--embassy-gold);
            font-size: 24px;
            margin-bottom: 20px;
        }

        .property-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .stat-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid var(--embassy-gold);
        }

        .stat-item strong {
            color: var(--embassy-gold);
            display: block;
            margin-bottom: 5px;
        }

        /* Room Types Section */
        .room-types-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
        }

        .section-title {
            color: var(--embassy-navy);
            font-size: 24px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 3px solid var(--embassy-gold);
        }

        .room-types-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 15px;
            margin-top: 25px;
        }

        .room-type-card {
            background: var(--embassy-light-blue);
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid var(--embassy-blue);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .room-type-card:hover {
            background: var(--embassy-blue);
            color: white;
            transform: translateY(-2px);
        }

        .room-type-card:hover h3,
        .room-type-card:hover p {
            color: white;
        }

        .room-type-card.active {
            background: var(--embassy-navy);
            color: white;
            border-left-color: var(--embassy-gold);
        }

        .room-type-card.active h3,
        .room-type-card.active p {
            color: white;
        }

        .room-type-card.active::after {
            content: "‚úì Active";
            position: absolute;
            top: 10px;
            right: 15px;
            background: var(--embassy-gold);
            color: var(--embassy-navy);
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
        }

        .room-type-card h3 {
            color: var(--embassy-navy);
            margin-bottom: 10px;
            font-size: 18px;
        }

        .room-type-card p {
            color: #666;
            font-size: 14px;
            font-style: italic;
        }

        /* Rooms Grid Section */
        .rooms-grid-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
        }

        .floor-section {
            margin-bottom: 30px;
        }

        .floor-section.hidden {
            display: none;
        }

        .floor-header {
            background: var(--embassy-navy);
            color: white;
            padding: 15px 25px;
            font-size: 18px;
            font-weight: 600;
            border-radius: 10px 10px 0 0;
        }

        .rooms-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(85px, 1fr));
            gap: 10px;
            padding: 20px;
            background: var(--embassy-light-blue);
            border-radius: 0 0 10px 10px;
        }

        .room-card {
            background: white;
            padding: 12px 8px;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .room-card:hover {
            background: var(--embassy-blue);
            color: white;
            transform: scale(1.05);
        }

        .room-number {
            font-weight: 600;
            font-size: 16px;
        }

        .room-type {
            font-size: 11px;
            color: #666;
            margin-top: 4px;
        }

        .room-card:hover .room-type {
            color: white;
        }

        .room-card.connecting {
            border-color: var(--embassy-gold);
        }

        .no-results {
            text-align: center;
            padding: 60px 20px;
            color: #666;
            font-size: 16px;
        }

        /* Loading State */
        .loading {
            text-align: center;
            padding: 100px 20px;
            color: white;
            font-size: 18px;
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .sidebar {
                width: 240px;
            }

            .property-stats {
                grid-template-columns: 1fr 1fr;
            }

            .room-types-grid {
                grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .hamburger {
                display: block;
            }

            body {
                flex-direction: column;
            }

            .sidebar {
                position: fixed;
                left: 0;
                top: 0;
                width: 280px;
                height: 100vh;
                z-index: 1000;
                transform: translateX(-100%);
            }

            .sidebar.active {
                transform: translateX(0);
            }

            .main-content {
                padding: 80px 20px 20px;
                width: 100%;
            }

            .datetime-display {
                position: static;
                margin-bottom: 15px;
                text-align: left;
            }

            .page-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
                padding: 20px;
            }

            .page-title-section h1 {
                font-size: 28px;
            }

            .property-stats {
                grid-template-columns: 1fr;
            }

            .room-types-grid {
                grid-template-columns: 1fr;
            }

            .rooms-grid {
                grid-template-columns: repeat(auto-fill, minmax(70px, 1fr));
            }
        }
    </style>
</head>
<body>
    <div id="loading" class="loading">
        <p>Loading Room Reference Guide...</p>
    </div>

    <!-- Hamburger Menu Button -->
    <button class="hamburger" id="hamburger" onclick="toggleSidebar()">
        <span></span>
        <span></span>
        <span></span>
    </button>

    <div id="pageContent" style="display: none; width: 100%; display: flex;">
        <!-- Left Sidebar Navigation -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h2>ATL ESnet</h2>
                <p>Embassy Suites Centennial Park</p>
            </div>

            <nav>
                <a href="index.html" class="nav-link home">Dashboard Home</a>

                <div class="nav-section">
                    <div class="nav-section-title">Guest Services</div>
                    <a href="room-reference.html" class="nav-link active">Room Reference Guide</a>
                    <a href="training-binder.html" class="nav-link">Training Binder</a>
                    <a href="hotel-amenities.html" class="nav-link">Hotel Amenities</a>
                    <a href="nearby-attractions.html" class="nav-link">Nearby Attractions</a>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">Hotel Dining</div>
                    <a href="lv-restaurants.html" class="nav-link">LV Restaurants</a>
                    <a href="starbucks.html" class="nav-link">Starbucks</a>
                    <a href="ruths-chris.html" class="nav-link">Ruth's Chris Steak House</a>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">Management</div>
                    <a href="group-guide.html" class="nav-link">Group Guide</a>
                </div>
            </nav>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Date/Time Display Above Header -->
            <div class="datetime-display" id="currentDateTime"></div>

            <!-- Page Header -->
            <header class="page-header">
                <div class="page-title-section">
                    <h1>
                        <span>üè®</span>
                        Room Reference Guide
                    </h1>
                    <p>Complete directory of all 321 guest rooms with searchable filters</p>
                </div>
                <a href="index.html" class="back-button">‚Üê Back to Dashboard</a>
            </header>

            <!-- Search Section -->
            <div class="search-section">
                <h2>üîç Search Rooms</h2>
                <div class="search-container">
                    <span class="search-icon">üîç</span>
                    <input 
                        type="text" 
                        class="search-input" 
                        id="searchInput" 
                        placeholder="Search by room number, code, type, or connecting room..."
                    >
                </div>
                <p class="search-examples">Examples: "447" (room number), "KSVN" (room code), "king" or "accessible" (room type)</p>
                
                <label class="connecting-filter">
                    <input type="checkbox" id="connectingToggle">
                    Show only rooms with connecting rooms <span class="count">(56 rooms)</span>
                </label>
            </div>

            <!-- Filter Info Bar -->
            <div class="filter-info" id="filterInfo">
                <strong id="filterText"></strong>
                <button class="clear-filter" onclick="clearAllFilters()">Clear Filter</button>
            </div>

            <!-- Property Overview -->
            <div class="property-overview">
                <h2>üè¢ Property Overview</h2>
                <div class="property-stats">
                    <div class="stat-item">
                        <strong>Total Rooms</strong>
                        321 guest rooms
                    </div>
                    <div class="stat-item">
                        <strong>Floors</strong>
                        2nd - 8th floors
                    </div>
                    <div class="stat-item">
                        <strong>Room Types</strong>
                        16 different configurations
                    </div>
                    <div class="stat-item">
                        <strong>Connecting Rooms</strong>
                        56 rooms with connections
                    </div>
                </div>
            </div>

            <!-- Room Types Filter -->
            <div class="room-types-section">
                <h2 class="section-title">Filter by Room Type</h2>
                <div class="room-types-grid" id="roomTypesFilter">
                    <!-- Room type cards will be inserted here by JavaScript -->
                </div>
            </div>

            <!-- Rooms Grid -->
            <div class="rooms-grid-section">
                <h2 class="section-title">All Rooms</h2>
                <div id="roomsContainer">
                    <!-- Floor sections will be inserted here by JavaScript -->
                </div>
            </div>
        </main>
    </div>

    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getAuth, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
        import { firebaseConfig } from './firebase-config.js';

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        // Room data - This should be loaded from your rooms data
        const roomTypes = {
            'KNGN': 'Standard King Suite',
            'TDBN': 'Standard Two Double Suite',
            'KSVN': 'Park View King Suite',
            'TSVN': 'Park View Two Double Suite',
            'KEXN': 'King Executive Suite',
            'TEXN': 'Two Double Executive Suite',
            'KVIP': 'King VIP Suite',
            'TVIP': 'Two Double VIP Suite',
            'KACC': 'Accessible King Suite',
            'TACC': 'Accessible Two Double Suite',
            'KSVA': 'Park View Accessible King Suite',
            'TSVA': 'Park View Accessible Two Double Suite',
            'KEXA': 'Accessible King Executive Suite',
            'TEXA': 'Accessible Two Double Executive Suite',
            'KVAC': 'Accessible King VIP Suite',
            'TVAC': 'Accessible Two Double VIP Suite'
        };

        let allRooms = [];
        let activeFilter = null;
        let connectingOnly = false;

        // Toggle Sidebar for Mobile
        window.toggleSidebar = function() {
            const sidebar = document.getElementById('sidebar');
            const hamburger = document.getElementById('hamburger');
            sidebar.classList.toggle('active');
            hamburger.classList.toggle('active');
        };

        // Close sidebar when clicking outside on mobile
        document.addEventListener('click', function(event) {
            const sidebar = document.getElementById('sidebar');
            const hamburger = document.getElementById('hamburger');
            
            if (window.innerWidth <= 768 && 
                sidebar.classList.contains('active') && 
                !sidebar.contains(event.target) && 
                !hamburger.contains(event.target)) {
                sidebar.classList.remove('active');
                hamburger.classList.remove('active');
            }
        });

        // Update date and time display
        function updateDateTime() {
            const now = new Date();
            const options = { 
                weekday: 'short', 
                year: 'numeric', 
                month: 'short', 
                day: 'numeric',
                hour: 'numeric',
                minute: '2-digit',
                second: '2-digit',
                hour12: true
            };
            const dateTimeString = now.toLocaleDateString('en-US', options);
            const dateTimeElement = document.getElementById('currentDateTime');
            if (dateTimeElement) {
                dateTimeElement.textContent = dateTimeString;
            }
        }

        updateDateTime();
        setInterval(updateDateTime, 1000);

        // Generate sample room data (replace with your actual data loading)
        function generateRoomData() {
            const rooms = [];
            const floors = [2, 3, 4, 5, 6, 7, 8];
            const roomsPerFloor = [46, 46, 46, 46, 46, 46, 45]; // Adjust as needed
            const typeKeys = Object.keys(roomTypes);
            
            let roomNumber = 201;
            floors.forEach((floor, floorIndex) => {
                for (let i = 0; i < roomsPerFloor[floorIndex]; i++) {
                    // Skip rooms that don't exist (like 219, 220, 221)
                    if ([219, 220, 221, 319, 320, 321, 419, 420, 421, 519, 520, 521, 619, 620, 621, 719, 720, 721, 819, 820, 821].includes(roomNumber)) {
                        roomNumber++;
                        continue;
                    }
                    
                    const typeIndex = Math.floor(Math.random() * typeKeys.length);
                    const roomCode = typeKeys[typeIndex];
                    const hasConnecting = Math.random() < 0.17; // ~17% have connecting rooms
                    
                    rooms.push({
                        number: roomNumber,
                        floor: floor,
                        code: roomCode,
                        type: roomTypes[roomCode],
                        hasConnecting: hasConnecting
                    });
                    
                    roomNumber++;
                    if (roomNumber % 100 > 50) {
                        roomNumber = (floor + 1) * 100 + 1;
                    }
                }
                roomNumber = (floor + 1) * 100 + 1;
            });
            
            return rooms;
        }

        // Load rooms
        function loadRooms() {
            allRooms = generateRoomData(); // Replace with actual data loading
            displayRoomTypes();
            displayRooms(allRooms);
        }

        // Display room type filter cards
        function displayRoomTypes() {
            const container = document.getElementById('roomTypesFilter');
            container.innerHTML = Object.entries(roomTypes).map(([code, name]) => `
                <div class="room-type-card" onclick="filterByType('${code}')">
                    <h3>${code}</h3>
                    <p>${name}</p>
                </div>
            `).join('');
        }

        // Display rooms by floor
        function displayRooms(rooms) {
            const container = document.getElementById('roomsContainer');
            
            if (rooms.length === 0) {
                container.innerHTML = '<div class="no-results">No rooms found matching your search criteria.</div>';
                return;
            }

            // Group rooms by floor
            const floors = {};
            rooms.forEach(room => {
                if (!floors[room.floor]) {
                    floors[room.floor] = [];
                }
                floors[room.floor].push(room);
            });

            // Display by floor
            container.innerHTML = Object.keys(floors).sort().map(floor => `
                <div class="floor-section">
                    <div class="floor-header">Floor ${floor} (${floors[floor].length} rooms)</div>
                    <div class="rooms-grid">
                        ${floors[floor].map(room => `
                            <div class="room-card ${room.hasConnecting ? 'connecting' : ''}" 
                                 onclick="window.location.href='rooms/${room.number}.html'"
                                 title="${room.type}${room.hasConnecting ? ' - Has connecting room' : ''}">
                                <div class="room-number">${room.number}</div>
                                <div class="room-type">${room.code}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `).join('');
        }

        // Filter by room type
        window.filterByType = function(code) {
            const cards = document.querySelectorAll('.room-type-card');
            cards.forEach(card => card.classList.remove('active'));
            
            if (activeFilter === code) {
                // Toggle off
                activeFilter = null;
                document.getElementById('filterInfo').classList.remove('show');
            } else {
                // Apply filter
                activeFilter = code;
                event.target.closest('.room-type-card').classList.add('active');
                document.getElementById('filterText').textContent = `Showing ${roomTypes[code]} only`;
                document.getElementById('filterInfo').classList.add('show');
            }
            
            applyFilters();
        };

        // Search functionality
        document.getElementById('searchInput').addEventListener('input', function(e) {
            applyFilters();
        });

        // Connecting rooms toggle
        document.getElementById('connectingToggle').addEventListener('change', function(e) {
            connectingOnly = e.target.checked;
            applyFilters();
        });

        // Apply all filters
        function applyFilters() {
            let filtered = allRooms;

            // Search filter
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            if (searchTerm) {
                filtered = filtered.filter(room => 
                    room.number.toString().includes(searchTerm) ||
                    room.code.toLowerCase().includes(searchTerm) ||
                    room.type.toLowerCase().includes(searchTerm) ||
                    (room.hasConnecting && 'connecting'.includes(searchTerm))
                );
            }

            // Room type filter
            if (activeFilter) {
                filtered = filtered.filter(room => room.code === activeFilter);
            }

            // Connecting rooms filter
            if (connectingOnly) {
                filtered = filtered.filter(room => room.hasConnecting);
            }

            displayRooms(filtered);
        }

        // Clear all filters
        window.clearAllFilters = function() {
            activeFilter = null;
            connectingOnly = false;
            document.getElementById('searchInput').value = '';
            document.getElementById('connectingToggle').checked = false;
            document.getElementById('filterInfo').classList.remove('show');
            
            const cards = document.querySelectorAll('.room-type-card');
            cards.forEach(card => card.classList.remove('active'));
            
            displayRooms(allRooms);
        };

        // Check authentication
        onAuthStateChanged(auth, async (user) => {
            if (!user) {
                window.location.href = 'firebase-login.html';
                return;
            }

            // Load rooms
            loadRooms();

            // Show content
            document.getElementById('loading').style.display = 'none';
            document.getElementById('pageContent').style.display = 'flex';
        });
    </script>
</body>
</html>